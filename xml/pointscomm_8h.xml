<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
  <compounddef id="pointscomm_8h" kind="file">
    <compoundname>pointscomm.h</compoundname>
    <includes local="no">openssl/bio.h</includes>
    <includes local="no">openssl/ssl.h</includes>
    <includes local="no">openssl/err.h</includes>
    <includes local="no">signal.h</includes>
    <includes local="no">sys/types.h</includes>
    <includes local="no">sys/socket.h</includes>
    <includes local="no">netinet/in.h</includes>
    <includes local="no">arpa/inet.h</includes>
    <includes local="no">errno.h</includes>
    <includedby refid="cameroa_8h" local="yes">/home/dromeuf/CLIMSO/cameroa/src/cameroa.h</includedby>
    <includedby refid="pointscomm_8cpp" local="no">/home/dromeuf/CLIMSO/cameroa/src/pointscomm.cpp</includedby>
    <incdepgraph>
      <node id="1580">
        <label>netinet/in.h</label>
      </node>
      <node id="1581">
        <label>arpa/inet.h</label>
      </node>
      <node id="1582">
        <label>errno.h</label>
      </node>
      <node id="1573">
        <label>/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h</label>
        <link refid="pointscomm.h"/>
        <childnode refid="1574" relation="include">
        </childnode>
        <childnode refid="1575" relation="include">
        </childnode>
        <childnode refid="1576" relation="include">
        </childnode>
        <childnode refid="1577" relation="include">
        </childnode>
        <childnode refid="1578" relation="include">
        </childnode>
        <childnode refid="1579" relation="include">
        </childnode>
        <childnode refid="1580" relation="include">
        </childnode>
        <childnode refid="1581" relation="include">
        </childnode>
        <childnode refid="1582" relation="include">
        </childnode>
      </node>
      <node id="1574">
        <label>openssl/bio.h</label>
      </node>
      <node id="1576">
        <label>openssl/err.h</label>
      </node>
      <node id="1578">
        <label>sys/types.h</label>
      </node>
      <node id="1577">
        <label>signal.h</label>
      </node>
      <node id="1579">
        <label>sys/socket.h</label>
      </node>
      <node id="1575">
        <label>openssl/ssl.h</label>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="1583">
        <label>/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h</label>
        <link refid="pointscomm.h"/>
        <childnode refid="1584" relation="include">
        </childnode>
      </node>
      <node id="1584">
        <label>/home/dromeuf/CLIMSO/cameroa/src/cameroa.h</label>
        <link refid="cameroa_8h-source"/>
      </node>
    </invincdepgraph>
    <innerclass refid="classPointComm">PointComm</innerclass>
    <innerclass refid="classPointCommServeurNonChiffreMonoClient">PointCommServeurNonChiffreMonoClient</innerclass>
    <innerclass refid="classPointCommServeurChiffreMonoClient">PointCommServeurChiffreMonoClient</innerclass>
    <innerclass refid="classPointCommClientNonChiffre">PointCommClientNonChiffre</innerclass>
    <innerclass refid="classPointCommClientChiffre">PointCommClientChiffre</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="pointscomm_8h_1faa13cb173de0662243d9ec664408638" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_FICHIER_SSL</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="29" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="29" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_10515098656fb800bd11ee70135140eba" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_VARIABLE_SSL</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="30" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="30" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_17adf4ba86f7fd9f6c3f5b60919ab5597" prot="public" static="no">
        <name>TAILLE_MAX_MDP_CLE_PRIVEE</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="31" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="31" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_13af853f9d71d7f100560a50ec923f693" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_ERREUR_SSL</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="32" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="32" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_108df8dde15d18fa5cffeca1eba395da1" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_COUT_SSL</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="33" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="33" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_190279afc360aee49402cb63703aae1c9" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_BIO</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="34" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="34" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_1a9d30fceec1dfa79e72ccaad4954c85f" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_NET</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="36" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="36" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_1e6f1afd61e1aa3778a7b2ec020740452" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_ERREUR_NET</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="37" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="37" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_1409e5e0b7dfbe72b46787de3518b8ec1" prot="public" static="no">
        <name>TAILLE_MAXI_CHAINE_COUT_NET</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="38" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="38" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_14823d5019b0d87a378f87eab5579334a" prot="public" static="no">
        <name>CARACTERE_HORS_BANDE</name>
        <initializer>&quot;--@&quot;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="40" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="40" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_1ba5406d42be96553fe0204faf8a59b75" prot="public" static="no">
        <name>TAILLE_BUFFER_SOCKET</name>
        <initializer>2048</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="41" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_1ee84b85cc08c614b7dc5c2ab2ee6e10b" prot="public" static="no">
        <name>TAILLE_BUFFER_ENVOYER_FICHIER</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="43" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="43" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_175cb0d9667ceeb032992169f7b30663d" prot="public" static="no">
        <name>TAILLE_BUFFER_RECEVOIR_FICHIER</name>
        <initializer>1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="44" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pointscomm_8h_14b3ee7d17f3b8316fc03eca633bbc337" prot="public" static="no">
        <name>TAILLE_IDENTITE_FICHIER</name>
        <initializer>26</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" line="45" bodyfile="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h" bodystart="45" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>HEADER<sp/>DU<sp/>MODULE<sp/>DES<sp/>CLASSES<sp/>DE<sp/>POINTS<sp/>DE<sp/>COMMUNICATION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//<sp/>(C)David.Romeuf@univ-lyon1.fr<sp/>16/03/2006<sp/>par<sp/>David<sp/>Romeuf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>_POINTSCOMM_H_</highlight></codeline>
<codeline lineno="9"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>_POINTSCOMM_H_</highlight></codeline>
<codeline lineno="10"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;openssl/bio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;openssl/ssl.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;openssl/err.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;signal.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/types.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/socket.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;netinet/in.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;arpa/inet.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Inclusion<sp/>des<sp/>entetes<sp/>C<sp/>qui<sp/>ne<sp/>sont<sp/>pas<sp/>fournit<sp/>par<sp/>le<sp/>systeme</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal">{</highlight></codeline>
<codeline lineno="26"><highlight class="normal">}</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_FICHIER_SSL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="30"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_VARIABLE_SSL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="31"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAX_MDP_CLE_PRIVEE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="32"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_ERREUR_SSL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="33"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_COUT_SSL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="34"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_BIO<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="35"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_NET<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="37"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_ERREUR_NET<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="38"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>TAILLE_MAXI_CHAINE_COUT_NET<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1024</highlight></codeline>
<codeline lineno="39"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>CARACTERE_HORS_BANDE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;--</highlight><highlight class="stringliteral">@&quot;<sp/><sp/><sp/>//<sp/>ATTENTION<sp/>:<sp/>@<sp/>au<sp/>hasard,<sp/>--<sp/>avant<sp/>pour<sp/>le<sp/>preceder<sp/>de<sp/>caracteres,<sp/>eviter<sp/>bloquage<sp/>recv()
#define<sp/>TAILLE_BUFFER_SOCKET<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2048

#define<sp/>TAILLE_BUFFER_ENVOYER_FICHIER<sp/><sp/><sp/><sp/><sp/>1024
#define<sp/>TAILLE_BUFFER_RECEVOIR_FICHIER<sp/><sp/><sp/><sp/><sp/>1024
#define<sp/>TAILLE_IDENTITE_FICHIER<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>26<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Nombre<sp/>de<sp/>caracteres<sp/>de<sp/>l&apos;identite<sp/>d&apos;un<sp/>fichier


//<sp/>Classe<sp/>de<sp/>base<sp/>d&apos;un<sp/>point<sp/>de<sp/>communication
//
class<sp/>PointComm
{
private:

protected:
<sp/><sp/><sp/>int<sp/>IdSocket;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Identifieur<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>AdresseIP;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adresse<sp/>IP<sp/>d&apos;attachement
<sp/><sp/><sp/><sp/>uint16_t<sp/>Port;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Port<sp/>IP<sp/>d&apos;attachement
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>TimeoutSocketPut;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Timeout<sp/>en<sp/>secondes<sp/>pour<sp/>la<sp/>tentative<sp/>d&apos;ecriture<sp/>de<sp/>donnees<sp/>dans<sp/>la<sp/>socket
<sp/><sp/>int<sp/>TimeoutSocketGet;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Timeout<sp/>en<sp/>secondes<sp/>pour<sp/>la<sp/>tentative<sp/>de<sp/>lecture<sp/>de<sp/>donnees<sp/>dans<sp/>la<sp/>socket
<sp/><sp/>struct<sp/>sockaddr_in<sp/>AdresseSocket;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Structure<sp/>decrivant<sp/>l&apos;adresse:port<sp/>de<sp/>la<sp/>socket<sp/>pour<sp/>le<sp/>domaine<sp/>AF_INET
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketCree;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>si<sp/>la<sp/>socket<sp/>est<sp/>cree
<sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Drapeau<sp/>pour<sp/>mode<sp/>verbeux
<sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>int<sp/>ModeVerbeux;

public:
<sp/><sp/><sp/><sp/><sp/><sp/>PointComm(int<sp/>pverbeux,int<sp/>pTimeoutSocketPut,int<sp/>pTimeoutSocketGet);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Constructeur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>virtual<sp/>~PointComm();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Destructeur
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>virtual<sp/>int<sp/>Initialisation(void)=0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fonction<sp/>virtuelle<sp/>pure<sp/>imposant<sp/>la<sp/>redefinition<sp/>dans<sp/>la<sp/>classe<sp/>enfant
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>ObjetModeVerbeux(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>est<sp/>en<sp/>mode<sp/>verbeux<sp/>ou<sp/>pas
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>en<sp/>mode<sp/>bloquant
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketNonBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>en<sp/>mode<sp/>NON<sp/>bloquant
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>PossibleLireDonneesSocket(int<sp/>timeout);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>des<sp/>donnees<sp/>sont<sp/>disponibles<sp/>en<sp/>lecture<sp/>sur<sp/>la<sp/>socket<sp/>sous<sp/>x<sp/>ms<sp/>?
<sp/><sp/><sp/><sp/>int<sp/>PossibleEcrireDonneesSocket(int<sp/>timeout);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>peut<sp/>ecrire<sp/>des<sp/>donnees<sp/>sur<sp/>la<sp/>socket<sp/>sous<sp/>x<sp/>ms<sp/>?
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EnvoyerChaineSocket(const<sp/>char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>une<sp/>chaine<sp/>de<sp/>caractere<sp/>sur<sp/>la<sp/>socket
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>long<sp/>EnvoyerFichierSocket(const<sp/>char<sp/>*nom,const<sp/>char<sp/>*id_fichier);<sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>un<sp/>fichier<sp/>sur<sp/>la<sp/>socket
<sp/><sp/><sp/><sp/>int<sp/>LireDonneesSocket(void<sp/>*buf,int<sp/>max);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>des<sp/>donnees<sp/>et<sp/>les<sp/>stocker
<sp/>int<sp/>LireNbDonneesSocket(void<sp/>*buf,int<sp/>nb);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>nb<sp/>octets<sp/>et<sp/>les<sp/>stocker
<sp/><sp/><sp/>int<sp/>LireLigneSocket(char<sp/>*buf,int<sp/>max);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>une<sp/>ligne<sp/>termine<sp/>par<sp/>\n

<sp/><sp/>int<sp/>CloseIdSocket(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fermeture<sp/>de<sp/>la<sp/>socket<sp/>IdSocket
};


//<sp/>Classe<sp/>de<sp/>base<sp/>d&apos;un<sp/>point<sp/>de<sp/>communication<sp/>Serveur<sp/>non<sp/>chiffre<sp/>mono<sp/>client
//
class<sp/>PointCommServeurNonChiffreMonoClient<sp/>:<sp/>public<sp/>PointComm
{
private:

protected:
<sp/><sp/>int<sp/>ObjetInitialise;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketAttachee;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>la<sp/>socket<sp/>est<sp/>bien<sp/>attachee
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketEcoute;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>la<sp/>socket<sp/>est<sp/>a<sp/>l&apos;ecoute
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>IdSocketSession;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Descripteur<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>struct<sp/>sockaddr_in<sp/>AdresseSocketClient;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adresse<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>du<sp/>client<sp/>_in<sp/>car<sp/>domaine<sp/>Internet
<sp/><sp/>uint32_t<sp/>AdresseIPClientAutorise;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adresse<sp/>IP<sp/>du<sp/>client<sp/>autorise
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>NbListeClientsMax;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Nombre<sp/>de<sp/>clients<sp/>maximum<sp/>dans<sp/>la<sp/>file<sp/>des<sp/>connexions<sp/>clientes<sp/>en<sp/>attente
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>ClientConnecte;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>si<sp/>un<sp/>client<sp/>est<sp/>connecte

public:
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Constructeur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointCommServeurNonChiffreMonoClient(int<sp/>pverbeux,uint32_t<sp/>pAdresse,uint16_t<sp/>pPort,uint32_t<sp/>pAdresseClient,int<sp/>pNbLClientsMax,int<sp/>pTimeoutSocketPut,int<sp/>pTimeoutSocketGet);
<sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Destructeur
<sp/>virtual<sp/>~PointCommServeurNonChiffreMonoClient();
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Initialisation(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fonction<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet<sp/>point<sp/>de<sp/>communication<sp/>serveur<sp/>non<sp/>chiffre
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>CreationReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Creation<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>AttachementReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Attachement<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EcouteReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Lancement<sp/>de<sp/>l&apos;ecoute<sp/>du<sp/>serveur<sp/>IP:port
<sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>AttenteAccepterSessionAutorisee(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Attente<sp/>et<sp/>acceptation<sp/>d&apos;une<sp/>session<sp/>de<sp/>connexion
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SessionAccepteeAutorisee(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>une<sp/>session<sp/>a<sp/>ete<sp/>acceptee<sp/>et<sp/>autorisee
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EcrireCaractereHorsBandeSocketSession(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>un<sp/>caractere<sp/>urgent<sp/>hors<sp/>bande
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>LireJusquAuCaractereHorsBandeSocketSession(void);<sp/><sp/><sp/>//<sp/>Recevoir<sp/>jusqu&apos;au<sp/>prochain<sp/>caractere<sp/>hors<sp/>bande
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EnvoyerChaineSocketSession(const<sp/>char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>une<sp/>chaine<sp/>de<sp/>caractere
<sp/><sp/><sp/><sp/><sp/>int<sp/>EnvoyerDonneesSocketSession(void<sp/>*buf,int<sp/>nb);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>des<sp/>donnees
<sp/>int<sp/>LireDonneesSocketSession(void<sp/>*buf,int<sp/>max);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>des<sp/>donnees<sp/>et<sp/>les<sp/>stocker
<sp/>long<sp/>RecevoirFichierSocketSession(const<sp/>char<sp/>*nom,char<sp/>*identite);<sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>un<sp/>fichier<sp/>par<sp/>la<sp/>socket<sp/>de<sp/>session
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>UnClientEstConnecte(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>un<sp/>client<sp/>est<sp/>actuellement<sp/>connecte
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketSessionBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante<sp/>en<sp/>mode<sp/>bloquant
<sp/><sp/><sp/>int<sp/>SocketSessionNonBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante<sp/>en<sp/>mode<sp/>NON<sp/>bloquant
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketSessionHorsBandeInLine(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>en<sp/>mode<sp/>lecture<sp/>en<sp/>ligne<sp/>du<sp/>caractere<sp/>hors<sp/>bande
<sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>PossibleLireDonneesSocketSession(int<sp/>timeout);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>des<sp/>donnees<sp/>sont<sp/>disponibles<sp/>en<sp/>lecture<sp/>sur<sp/>la<sp/>socket<sp/>?
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>PossibleEcrireDonneesSocketSession(int<sp/>timeout);<sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>peut<sp/>ecrire<sp/>des<sp/>donnees<sp/>sur<sp/>la<sp/>socket<sp/>?
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>FermetureSession(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fermeture<sp/>de<sp/>la<sp/>connexion<sp/>courante
};


//<sp/>Classe<sp/>de<sp/>base<sp/>d&apos;un<sp/>point<sp/>de<sp/>communication<sp/>Serveur<sp/>chiffre<sp/>mono<sp/>client
//
class<sp/>PointCommServeurChiffreMonoClient<sp/>:<sp/>public<sp/>PointComm
{
private:
<sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>du<sp/>certificat<sp/>de<sp/>l&apos;autorite<sp/>de<sp/>certification<sp/>CA
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>CertificatCA[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>du<sp/>certificat<sp/>du<sp/>serveur<sp/>(cle<sp/>publique)
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>CertificatServeur[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>de<sp/>la<sp/>cle<sp/>privee<sp/>du<sp/>serveur
<sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>ClePriveeServeur[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>des<sp/>parametres<sp/>Diffie-Hellman<sp/>aleatoires<sp/>(pour<sp/>optimiser<sp/>la<sp/>vitesse<sp/>de<sp/>reponse<sp/>du<sp/>serveur)
<sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>ChemParametresDH[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chaine<sp/>de<sp/>la<sp/>liste<sp/>des<sp/>chiffreurs<sp/>que<sp/>le<sp/>serveur<sp/>doit<sp/>utiliser
<sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>ListeChiffreurs[TAILLE_MAXI_CHAINE_VARIABLE_SSL];
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chaine<sp/>contenant<sp/>le<sp/>nom<sp/>du<sp/>contexte<sp/>du<sp/>serveur
<sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>IdentifieurContexteServeur[TAILLE_MAXI_CHAINE_VARIABLE_SSL];
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>fonction<sp/>C<sp/>appelee<sp/>lors<sp/>de<sp/>l&apos;acces<sp/>a<sp/>un<sp/>fichier<sp/>PEM<sp/>chiffre<sp/>par<sp/>un<sp/>mot<sp/>de<sp/>passe<sp/>de<sp/>la<sp/>cle<sp/>privee<sp/>du<sp/>serveur
<sp/>//
<sp/><sp/><sp/><sp/><sp/>int<sp/>(*FnMotDePasseClePriveeChiffree)(char*,<sp/>int,<sp/>int,<sp/>void*);
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>fonction<sp/>C<sp/>de<sp/>handler<sp/>du<sp/>signal<sp/>SIGPIPE
<sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>void<sp/>(*FnHandlerSIGPIPE)(int);
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Drapeau<sp/>pour<sp/>le<sp/>parametrage<sp/>ou<sp/>non<sp/>de<sp/>SIGPIPE
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>int<sp/>ParamSIGPIPE;
<sp/><sp/><sp/><sp/><sp/><sp/>
protected:
<sp/><sp/><sp/><sp/>int<sp/>SSLInitialisee;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>d&apos;initialisation<sp/>de<sp/>la<sp/>couche<sp/>SSL
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketAttachee;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>la<sp/>socket<sp/>est<sp/>bien<sp/>attachee
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketEcoute;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>la<sp/>socket<sp/>est<sp/>a<sp/>l&apos;ecoute
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>IdSocketSession;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Descripteur<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>struct<sp/>sockaddr_in<sp/>AdresseSocketClient;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adresse<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>du<sp/>client<sp/>_in<sp/>car<sp/>domaine<sp/>Internet
<sp/><sp/>uint32_t<sp/>AdresseIPClientAutorise;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adresse<sp/>IP<sp/>du<sp/>client<sp/>autorise
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>NbListeClientsMax;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Nombre<sp/>de<sp/>clients<sp/>maximum<sp/>dans<sp/>la<sp/>file<sp/>des<sp/>connexions<sp/>clientes<sp/>en<sp/>attente
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_METHOD<sp/>*MethodeVersionSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>methode<sp/>SSL<sp/>v2<sp/>ou<sp/>V3
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_CTX<sp/>*ContexteSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>le<sp/>contexte<sp/>SSL,<sp/>objet<sp/>avec<sp/>cle<sp/>et<sp/>certificats
<sp/>BIO<sp/>*ObjetBIO;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>un<sp/>objet<sp/>BIO<sp/>de<sp/>la<sp/>librairie<sp/>OpenSSL
<sp/><sp/><sp/>DH<sp/>*ParametresDH;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>les<sp/>parametres<sp/>aleatoires<sp/>Diffie-Hellman
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>BIO<sp/>*SocketSessionSSL_BIO;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>une<sp/>socket<sp/>de<sp/>session<sp/>SSL<sp/>dans<sp/>un<sp/>objet<sp/>BIO
<sp/><sp/><sp/>SSL<sp/>*StructSSLServeur;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Structure<sp/>SSL<sp/>de<sp/>connexion
<sp/><sp/>BIO<sp/>*ConnexionSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>un<sp/>objet<sp/>BIO<sp/>de<sp/>type<sp/>SSL<sp/>de<sp/>la<sp/>connexion
<sp/><sp/><sp/><sp/><sp/><sp/>BIO<sp/>*ConnexionBuffSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>un<sp/>objet<sp/>BIO<sp/>de<sp/>type<sp/>SSL<sp/>de<sp/>la<sp/>connexion<sp/>en<sp/>mode<sp/>buffer<sp/>ligne
<sp/>struct<sp/>sigaction<sp/>AncienGestSignalSIGPIPE;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Ancien<sp/>gestionnaire<sp/>du<sp/>signal<sp/>SIGPIPE<sp/>avant<sp/>gestion<sp/>de<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/>struct<sp/>sigaction<sp/>NouvGestSignalSIGPIPE;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Nouveau<sp/>gestionnaire<sp/>du<sp/>signal<sp/>SIGPIPE<sp/>pour<sp/>gestion<sp/>de<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/>SSL_CIPHER<sp/>*Chiffreur;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>description<sp/>du<sp/>chiffreur<sp/>de<sp/>la<sp/>connexion
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>TimeoutSSLAccept;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Timeout<sp/>en<sp/>secondes<sp/>de<sp/>l&apos;initiative<sp/>de<sp/>la<sp/>negociation<sp/>TLS/SSL
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>ClientConnecte;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>si<sp/>un<sp/>client<sp/>est<sp/>connecte
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>AfficheErreurPileLibrairieSSL(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Affichage<sp/>des<sp/>erreurs<sp/>produites<sp/>sur<sp/>la<sp/>pile<sp/>de<sp/>la<sp/>librairie<sp/>SSL
<sp/><sp/><sp/><sp/><sp/>void<sp/>AfficheErreurES_SSL(SSL<sp/>*structure,int<sp/>retour);<sp/><sp/><sp/><sp/>//<sp/>Affichage<sp/>des<sp/>erreurs<sp/>produitent<sp/>par<sp/>les<sp/>operations<sp/>E/S<sp/>TLS/SSL

public:
<sp/><sp/><sp/><sp/>//<sp/>Constructeur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointCommServeurChiffreMonoClient(int<sp/>pverbeux,uint32_t<sp/>pAdresse,uint16_t<sp/>pPort,uint32_t<sp/>pAdresseClient,int<sp/>pNbLClientsMax,int<sp/>pTimeoutSocketPut,int<sp/>pTimeoutSocketGet,int<sp/>pTimeoutNegoTLSSSL,int<sp/>pParamSIGPIPE,void<sp/>(*pFnHandlerSIGPIPE)(int),const<sp/>char<sp/>*MdpClePriveeServeur,char<sp/>*BuffStockMdpClePriveeServeur,int<sp/>(*pFnMotDePasseClePriveeChiffree)(char*,<sp/>int,<sp/>int,<sp/>void*),const<sp/>char<sp/>*pCheminCertificatCA,const<sp/>char<sp/>*pCheminCertificatServeur,const<sp/>char<sp/>*pCheminClePriveeServeur,const<sp/>char<sp/>*pParametresDH,const<sp/>char<sp/>*pListeChiffreurs);
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Destructeur
<sp/>virtual<sp/>~PointCommServeurChiffreMonoClient();
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Initialisation(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fonction<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet<sp/>point<sp/>de<sp/>communication<sp/>serveur<sp/>chiffre
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>CreationReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Creation<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>AttachementReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Attachement<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EcouteReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Lancement<sp/>de<sp/>l&apos;ecoute<sp/>du<sp/>serveur<sp/>IP:port
<sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>AttenteAccepterSessionAutorisee(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Attente<sp/>et<sp/>acceptation<sp/>d&apos;une<sp/>session<sp/>de<sp/>connexion
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SessionAccepteeAutorisee(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>une<sp/>session<sp/>a<sp/>ete<sp/>acceptee<sp/>et<sp/>autorisee
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>NegociationConnexionSSL(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Negociation<sp/>d&apos;une<sp/>connexion<sp/>SSL<sp/>avec<sp/>un<sp/>client<sp/>autorise
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>FermetureConnexionSSL(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fermeture<sp/>de<sp/>la<sp/>connexion<sp/>SSL<sp/>courante
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EnvoyerChaineBIO(const<sp/>char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>une<sp/>chaine<sp/>de<sp/>caractere<sp/>par<sp/>l&apos;objet<sp/>BIO<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/>int<sp/>RecevoirChaineBIO(char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Reception<sp/>d&apos;une<sp/>chaine<sp/>de<sp/>caractere<sp/>par<sp/>l&apos;objet<sp/>BIO<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>UnClientEstConnecte(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>un<sp/>client<sp/>est<sp/>actuellement<sp/>connecte
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>SocketSessionBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante<sp/>en<sp/>mode<sp/>bloquant
<sp/><sp/><sp/>int<sp/>SocketSessionNonBloquante(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Passage<sp/>de<sp/>la<sp/>socket<sp/>de<sp/>session<sp/>courante<sp/>en<sp/>mode<sp/>NON<sp/>bloquant
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>PossibleLireDonneesSocketSession(int<sp/>timeout);<sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>des<sp/>donnees<sp/>sont<sp/>disponibles<sp/>en<sp/>lecture<sp/>sur<sp/>la<sp/>socket<sp/>?
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>PossibleEcrireDonneesSocketSession(int<sp/>timeout);<sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>peut<sp/>ecrire<sp/>des<sp/>donnees<sp/>sur<sp/>la<sp/>socket<sp/>?
<sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_CIPHER<sp/>*DescripteurChiffreurConnexionSSL(void);<sp/><sp/><sp/><sp/><sp/>//<sp/>Retourne<sp/>un<sp/>pointeur<sp/>vers<sp/>le<sp/>descripteur<sp/>du<sp/>chiffreur<sp/>de<sp/>la<sp/>session<sp/>courante
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
};


//<sp/>Classe<sp/>de<sp/>base<sp/>d&apos;un<sp/>point<sp/>de<sp/>communication<sp/>Client<sp/>non<sp/>chiffre
//
class<sp/>PointCommClientNonChiffre<sp/>:<sp/>public<sp/>PointComm
{
private:

protected:
<sp/><sp/><sp/><sp/>int<sp/>ObjetInitialise;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>ConnecteServeur;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>l&apos;objet<sp/>est<sp/>connecte<sp/>a<sp/>un<sp/>serveur

public:
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Constructeur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointCommClientNonChiffre(int<sp/>pverbeux,uint32_t<sp/>pAdresse,uint16_t<sp/>pPort,int<sp/>pTimeoutSocketPut,int<sp/>pTimeoutSocketGet);
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Destructeur
<sp/>virtual<sp/>~PointCommClientNonChiffre();
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Initialisation(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fonction<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet<sp/>point<sp/>de<sp/>communication<sp/>client<sp/>non<sp/>chiffre
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>CreationReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Creation<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Connecter(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Connexion<sp/>au<sp/>serveur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EcrireCaractereHorsBande(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>un<sp/>caractere<sp/>urgent<sp/>hors<sp/>bande
<sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>LireJusquAuCaractereHorsBande(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Recevoir<sp/>jusqu&apos;au<sp/>prochain<sp/>caractere<sp/>hors<sp/>bande
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>Fermer(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fermeture<sp/>de<sp/>la<sp/>connexion<sp/>courante
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Connecte(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>est<sp/>connecte<sp/>au<sp/>serveur
};


//<sp/>Classe<sp/>de<sp/>base<sp/>d&apos;un<sp/>point<sp/>de<sp/>communication<sp/>Client<sp/>chiffre
//
class<sp/>PointCommClientChiffre<sp/>:<sp/>public<sp/>PointComm
{
private:
<sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>du<sp/>certificat<sp/>de<sp/>l&apos;autorite<sp/>de<sp/>certification<sp/>CA
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>CertificatCA[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>du<sp/>certificat<sp/>du<sp/>client<sp/>(cle<sp/>publique)
<sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>CertificatClient[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chemin<sp/>complet<sp/>et<sp/>nom<sp/>du<sp/>fichier<sp/>PEM<sp/>de<sp/>la<sp/>cle<sp/>privee<sp/>du<sp/>client
<sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>ClePriveeClient[TAILLE_MAXI_CHAINE_FICHIER_SSL];
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Chaine<sp/>contenant<sp/>le<sp/>nom<sp/>du<sp/>contexte<sp/>du<sp/>client
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>char<sp/>IdentifieurContexteClient[TAILLE_MAXI_CHAINE_VARIABLE_SSL];
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>fonction<sp/>C<sp/>appelee<sp/>lors<sp/>de<sp/>l&apos;acces<sp/>a<sp/>un<sp/>fichier<sp/>PEM<sp/>chiffre<sp/>par<sp/>un<sp/>mot<sp/>de<sp/>passe<sp/>de<sp/>la<sp/>cle<sp/>privee<sp/>du<sp/>client
<sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>int<sp/>(*FnMotDePasseClePriveeChiffree)(char*,<sp/>int,<sp/>int,<sp/>void*);
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>fonction<sp/>C<sp/>de<sp/>handler<sp/>du<sp/>signal<sp/>SIGPIPE
<sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>void<sp/>(*FnHandlerSIGPIPE)(int);
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Drapeau<sp/>pour<sp/>le<sp/>parametrage<sp/>ou<sp/>non<sp/>de<sp/>SIGPIPE
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//
<sp/><sp/><sp/><sp/><sp/>int<sp/>ParamSIGPIPE;
<sp/><sp/><sp/><sp/><sp/><sp/>
protected:
<sp/><sp/><sp/><sp/>int<sp/>SSLInitialisee;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>d&apos;initialisation<sp/>de<sp/>la<sp/>couche<sp/>SSL
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>ConnecteServeur;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Indicateur<sp/>pour<sp/>savoir<sp/>si<sp/>l&apos;objet<sp/>est<sp/>connecte<sp/>a<sp/>un<sp/>serveur
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_METHOD<sp/>*MethodeVersionSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>la<sp/>methode<sp/>SSL<sp/>v2<sp/>ou<sp/>V3
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_CTX<sp/>*ContexteSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>sur<sp/>le<sp/>contexte<sp/>SSL,<sp/>objet<sp/>avec<sp/>cle<sp/>et<sp/>certificats
<sp/>SSL<sp/>*StructSSLClient;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Structure<sp/>SSL<sp/>de<sp/>connexion<sp/>du<sp/>client
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>BIO<sp/>*SocketSSL_BIO;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>une<sp/>socket<sp/>SSL<sp/>dans<sp/>un<sp/>objet<sp/>BIO
<sp/><sp/><sp/><sp/><sp/><sp/>BIO<sp/>*ConnexionSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>un<sp/>objet<sp/>BIO<sp/>de<sp/>type<sp/>SSL<sp/>de<sp/>la<sp/>connexion
<sp/><sp/><sp/><sp/><sp/><sp/>BIO<sp/>*ConnexionBuffSSL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>un<sp/>objet<sp/>BIO<sp/>de<sp/>type<sp/>SSL<sp/>de<sp/>la<sp/>connexion<sp/>en<sp/>mode<sp/>buffer<sp/>ligne
<sp/>struct<sp/>sigaction<sp/>AncienGestSignalSIGPIPE;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Ancien<sp/>gestionnaire<sp/>du<sp/>signal<sp/>SIGPIPE<sp/>avant<sp/>gestion<sp/>de<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/>struct<sp/>sigaction<sp/>NouvGestSignalSIGPIPE;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Nouveau<sp/>gestionnaire<sp/>du<sp/>signal<sp/>SIGPIPE<sp/>pour<sp/>gestion<sp/>de<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/>SSL_CIPHER<sp/>*Chiffreur;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pointeur<sp/>vers<sp/>description<sp/>du<sp/>chiffreur<sp/>de<sp/>la<sp/>connexion
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>AfficheErreurPileLibrairieSSL(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Affichage<sp/>des<sp/>erreurs<sp/>produites<sp/>sur<sp/>la<sp/>pile<sp/>de<sp/>la<sp/>librairie<sp/>SSL
<sp/><sp/><sp/><sp/><sp/>void<sp/>AfficheErreurES_SSL(SSL<sp/>*structure,int<sp/>retour);<sp/><sp/><sp/><sp/>//<sp/>Affichage<sp/>des<sp/>erreurs<sp/>produitent<sp/>par<sp/>les<sp/>operations<sp/>E/S<sp/>TLS/SSL

public:
<sp/><sp/><sp/><sp/>//<sp/>Constructeur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointCommClientChiffre(int<sp/>pverbeux,uint32_t<sp/>pAdresse,uint16_t<sp/>pPort,int<sp/>pTimeoutSocketPut,int<sp/>pTimeoutSocketGet,int<sp/>pParamSIGPIPE,void<sp/>(*pFnHandlerSIGPIPE)(int),const<sp/>char<sp/>*MdpClePriveeClient,char<sp/>*BuffStockMdpClePriveeClient,int<sp/>(*pFnMotDePasseClePriveeChiffree)(char*,<sp/>int,<sp/>int,<sp/>void*),const<sp/>char<sp/>*pCheminCertificatCA,const<sp/>char<sp/>*pCheminCertificatClient,const<sp/>char<sp/>*pCheminClePriveeClient);
<sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Destructeur
<sp/>virtual<sp/>~PointCommClientChiffre();
<sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Initialisation(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fonction<sp/>d&apos;initialisation<sp/>de<sp/>l&apos;objet<sp/>point<sp/>de<sp/>communication<sp/>serveur<sp/>chiffre
<sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>CreationReseau(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Creation<sp/>du<sp/>point<sp/>de<sp/>communication
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>Connecter(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Connexion<sp/>au<sp/>serveur
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>Fermer(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fermeture<sp/>de<sp/>la<sp/>connexion<sp/>courante
<sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>EnvoyerChaineBIO(const<sp/>char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Envoyer<sp/>une<sp/>chaine<sp/>de<sp/>caractere<sp/>par<sp/>l&apos;objet<sp/>BIO<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/>int<sp/>RecevoirChaineBIO(char<sp/>*chaine);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Reception<sp/>d&apos;une<sp/>chaine<sp/>de<sp/>caractere<sp/>par<sp/>l&apos;objet<sp/>BIO<sp/>ConnexionBuffSSL
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>SSL_CIPHER<sp/>*DescripteurChiffreurConnexionSSL(void);<sp/><sp/><sp/><sp/><sp/>//<sp/>Retourne<sp/>un<sp/>pointeur<sp/>vers<sp/>le<sp/>descripteur<sp/>du<sp/>chiffreur<sp/>de<sp/>la<sp/>connexion<sp/>courante

<sp/><sp/><sp/><sp/><sp/>int<sp/>Connecte(void);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Pour<sp/>savoir<sp/>si<sp/>on<sp/>est<sp/>connecte<sp/>au<sp/>serveur
};


#endif
</codeline>
    </programlisting>
    <location file="/home/dromeuf/CLIMSO/cameroa/src/pointscomm.h"/>
  </compounddef>
</doxygen>
